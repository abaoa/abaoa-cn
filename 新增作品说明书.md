# 新增作品操作说明书

## 📁 目录结构

```
public/works/
├── manifest.json           # 作品列表（必须修改）
├── __template__/           # 模板文件夹
│   └── info.json          # 作品信息模板
├── filemanager-pro/       # 作品文件夹示例
│   ├── info.json          # 作品详细信息
│   └── cover.jpg          # 封面图
└── [你的作品文件夹]/       # 新增作品文件夹
    ├── info.json
    └── cover.jpg
```

---

## 🚀 快速开始（推荐方式：前端表单）

访问 `/admin` 页面，使用可视化表单编辑作品信息：

### 方式一：前端表单（推荐）

1. **访问管理页面**
   - 打开网站 `/admin`
   - 或本地开发 `http://localhost:5173/admin`

2. **编辑作品**
   - 点击现有作品「编辑」按钮，或「新建作品」
   - 在表单中填写信息
   - 点击「下载 info.json」保存文件

3. **放置文件**
   - 创建作品文件夹 `public/works/{slug}/`
   - 将下载的 `info.json` 放入文件夹
   - 放入封面图 `cover.jpg`

4. **生成列表**
   ```bash
   node scripts/generate-manifest.js
   ```

### 方式二：手动编辑（备用）

复制 `__template__` 文件夹，重命名为你的作品 slug：

```bash
cp -r public/works/__template__ public/works/myapp
```

然后编辑 `info.json` 文件。

---

## 📋 字段详细说明

### 必填字段

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| `id` | number | 唯一序号，递增 | `5` |
| `slug` | string | URL短名，英文小写，无空格 | `"filemanager-pro"` |
| `title` | string | 作品标题 | `"文件管理器 Pro"` |
| `description` | string | 简短描述（一句话） | `"一款功能强大的..."` |
| `latestVersion` | string | 最新版本号 | `"2.5.0"` |

### 可选字段

| 字段 | 类型 | 说明 | 示例 |
|------|------|------|------|
| `icon` | string | 图标标识 | `"simple-icons:qt"` |
| `tags` | array | 标签数组 | `["Qt6", "C++"]` |
| `platforms` | array | 支持平台 | `["Windows", "Linux", "macOS"]` |
| `features` | array | 功能特性列表 | `["功能1", "功能2"]` |
| `systemRequirements` | object | 各平台系统要求 | 见模板 |
| `versions` | array | 版本历史 | 见模板 |

---

## 🎨 图片规范

### 封面图（必填）
- **路径**: `public/works/{slug}/cover.jpg`
- **尺寸**: 1200x600 像素（2:1比例）
- **格式**: JPG 或 PNG
- **大小**: 建议 < 500KB

### 截图（可选）
- **路径**: `public/works/{slug}/screenshots/1.jpg`
- **尺寸**: 推荐 1920x1080
- **格式**: JPG
- **命名**: 1.jpg, 2.jpg, 3.jpg...

---

## 🔗 图标选择

### Simple Icons（推荐）
```json
"icon": "simple-icons:qt"       // Qt
"icon": "simple-icons:windows"  // Windows
"icon": "simple-icons:apple"    // macOS
"icon": "simple-icons:linux"    // Linux
```

### Lucide Icons
```json
"icon": "lucide:home"
"icon": "lucide:code"
"icon": "lucide:settings"
```

完整图标列表：
- Simple Icons: https://simpleicons.org/
- Lucide: https://lucide.dev/icons/

---

## 📝 版本更新流程

### 发布新版本

1. 在 `info.json` 的 `versions` 数组中添加新版本
2. 将之前版本的 `isLatest` 设为 `false`
3. 新版本的 `isLatest` 设为 `true`
4. 更新 `latestVersion` 字段

### 示例

```json
{
  "latestVersion": "2.0.0",
  "versions": [
    {
      "version": "2.0.0",
      "date": "2025-02-08",
      "changes": ["新增功能"],
      "isLatest": true,      // ✅ 最新版本
      "downloads": { ... }
    },
    {
      "version": "1.0.0",
      "date": "2025-01-01",
      "changes": ["初始版本"],
      "isLatest": false,     // ❌ 旧版本
      "downloads": { ... }
    }
  ]
}
```

---

## ✅ 发布前检查清单

- [ ] `id` 唯一且递增
- [ ] `slug` 使用英文小写，无空格（可用 `-` 连接）
- [ ] `cover.jpg` 已放置在正确的文件夹
- [ ] `info.json` 格式正确（可用 JSON 校验工具检查）
- [ ] 运行 `node scripts/generate-manifest.js` 生成列表
- [ ] 下载链接可访问
- [ ] MD5 值正确

---

## 🐛 常见问题

### Q: 页面显示空白？
A: 检查 `info.json` 是否为有效 JSON 格式（注意逗号、引号）

### Q: 图片不显示？
A: 检查路径是否正确，以 `/works/` 开头

### Q: 如何删除作品？
A: 1) 删除对应文件夹 2) 重新运行 `node scripts/generate-manifest.js` 更新列表

### Q: 支持多少张截图？
A: 无限制，建议 2-6 张

---

## 💡 最佳实践

1. **Slug 命名**: 使用英文小写，单词间用 `-` 连接
   - ✅ `filemanager-pro`
   - ❌ `File Manager Pro`

2. **描述简洁**: 控制在 30 字以内，一句话说明核心功能

3. **标签规范**: 使用 `"Qt6"`、`"C++"`、`"跨平台"` 等标准标签

4. **版本号规范**: 使用语义化版本 `主版本.次版本.修订号`
   - 示例：`2.5.0`、`1.0.0-beta`

5. **文件命名**: 下载文件名包含版本号和平台
   - 示例：`MyApp-v2.5.0-Windows.exe`

---

## 📦 提交部署

修改完成后，按顺序执行：

```bash
# 1. 生成作品列表
node scripts/generate-manifest.js

# 2. 提交到 GitHub
git add .
git commit -m "add: 新增作品 MyApp"
git push origin master
```

Vercel 会自动构建并部署更新。
